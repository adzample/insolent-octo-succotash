"use strict";angular.module("jocularOctoPruneApp",["ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){b.otherwise("/"),c.html5Mode(!0)}]),angular.module("jocularOctoPruneApp").directive("challengeModal",function(){return{templateUrl:"app/challengeModal/challengeModal.html",restrict:"E",replace:!0,transclude:!0,scope:{show:"="},link:function(a,b,c){a.dialogStyle={},c.width&&(a.dialogStyle.width=c.width),c.height&&(a.dialogStyle.height=c.height),a.hideModal=function(){a.show=!1}}}}),angular.module("jocularOctoPruneApp").controller("MainCtrl",["$scope","$http","$timeout","$window",function(a,b,c,d){function e(a){var b=new FileReader;b.onload=function(a){var b=new Image;b.onload=function(){k.width=b.width,k.height=b.height,l.drawImage(b,0,0)},b.src=a.target.result},b.readAsDataURL(a.target.files[0])}function f(){console.log("yo"),Caman("#imageCanvas",function(){this.colorize(0,30,255,40),this.newLayer(function(){this.overlayImage("assets/images/c49ce2cc.logo.png")}),this.render(function(){k.toBlob(function(b){saveAs(b,"image.jpg"),c(function(){a.completedDonation=!1},1500)})})})}function g(){a.clickedBegin=!0,a.countdown()}function h(){a.notConfirmed=!1,c(function(){a.clickedBegin=!1,a.completedDonation=!0},1500)}function i(){a.clickedUploaded=!0}a.awesomeThings=[],a.makeBlue=f,a.clickedBegin=!1,a.notConfirmed=!0,a.readyToBlue=!1,a.clickedUploaded=!1,a.completedDonation=!1,a.counter=5,a.step="step1",a.clickedSupport=g,a.confirmDonation=h,a.clickedUpload=i,b.get("/api/things").success(function(b){a.awesomeThings=b});var j=document.getElementById("imageLoader");j.addEventListener("change",e,!1);var k=document.getElementById("imageCanvas"),l=k.getContext("2d");HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(a,b,c){const d=atob(this.toDataURL(b,c).split(",")[1]),e=d.length,f=e>>2,g=new Uint8Array(e),h=new Uint32Array(g.buffer,0,f);for(var i=0,j=0;f>i;i++)h[i]=d.charCodeAt(j++)|d.charCodeAt(j++)<<8|d.charCodeAt(j++)<<16|d.charCodeAt(j++)<<24;for(var k=3&e;k--;)g[j]=d.charCodeAt(j++);a(new Blob([g],{type:b||"image/png"}))}}),a.countdown=function(){if(a.counter>0){c(function(){console.log(a.counter),a.counter--,a.countdown()},1e3)}else d.open("https://www.beyondblue.org.au/get-involved/make-a-donation/step-1-make-a-donation","_blank"),a.step="step2"};var k=document.getElementById("imageCanvas")}]),angular.module("jocularOctoPruneApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"})}]);var saveAs=saveAs||function(a){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},g=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),h=a.webkitRequestFileSystem,i=a.requestFileSystem||h||a.mozRequestFileSystem,j=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},k="application/octet-stream",l=0,m=500,n=function(b){var d=function(){"string"==typeof b?c().revokeObjectURL(b):b.remove()};a.chrome?d():setTimeout(d,m)},o=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){j(f)}}},p=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\ufeff",a],{type:a.type}):a},q=function(b,j,m){m||(b=p(b));var q,r,s,t=this,u=b.type,v=!1,w=function(){o(t,"writestart progress write writeend".split(" "))},x=function(){if(r&&g&&"undefined"!=typeof FileReader){var d=new FileReader;return d.onloadend=function(){var a=d.result;r.location.href="data:attachment/file"+a.slice(a.search(/[,;]/)),t.readyState=t.DONE,w()},d.readAsDataURL(b),void(t.readyState=t.INIT)}if((v||!q)&&(q=c().createObjectURL(b)),r)r.location.href=q;else{var e=a.open(q,"_blank");void 0==e&&g&&(a.location.href=q)}t.readyState=t.DONE,w(),n(q)},y=function(a){return function(){return t.readyState!==t.DONE?a.apply(this,arguments):void 0}},z={create:!0,exclusive:!1};return t.readyState=t.INIT,j||(j="download"),e?(q=c().createObjectURL(b),d.href=q,d.download=j,void setTimeout(function(){f(d),w(),n(q),t.readyState=t.DONE})):(a.chrome&&u&&u!==k&&(s=b.slice||b.webkitSlice,b=s.call(b,0,b.size,k),v=!0),h&&"download"!==j&&(j+=".download"),(u===k||h)&&(r=a),i?(l+=b.size,void i(a.TEMPORARY,l,y(function(a){a.root.getDirectory("saved",z,y(function(a){var c=function(){a.getFile(j,z,y(function(a){a.createWriter(y(function(c){c.onwriteend=function(b){r.location.href=a.toURL(),t.readyState=t.DONE,o(t,"writeend",b),n(a)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&x()},"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=t["on"+a]}),c.write(b),t.abort=function(){c.abort(),t.readyState=t.DONE},t.readyState=t.WRITING}),x)}),x)};a.getFile(j,{create:!1},y(function(a){a.remove(),c()}),y(function(a){a.code===a.NOT_FOUND_ERR?c():x()}))}),x)}),x)):void x())},r=q.prototype,s=function(a,b,c){return new q(a,b,c)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,b,c){return c||(a=p(a)),navigator.msSaveOrOpenBlob(a,b||"download")}:(r.abort=function(){var a=this;a.readyState=a.DONE,o(a,"abort")},r.readyState=r.INIT=0,r.WRITING=1,r.DONE=2,r.error=r.onwritestart=r.onprogress=r.onwrite=r.onabort=r.onerror=r.onwriteend=null,s)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),angular.module("jocularOctoPruneApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("jocularOctoPruneApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.menu=[{title:"Home",link:"/"}],a.isCollapsed=!0,a.isActive=function(a){return a===b.path()}}]),angular.module("jocularOctoPruneApp").run(["$templateCache",function(a){a.put("app/challengeModal/challengeModal.html",'<div class=ng-modal ng-show=show><div class=ng-modal-overlay ng-click=hideModal()></div><div class="ng-modal-dialog animated fadeIn" ng-style=dialogStyle><div class=ng-modal-close ng-click=hideModal()>X</div><div class=ng-modal-dialog-content ng-transclude></div></div></div>'),a.put("app/main/main.html",'<!-- <div ng-include="\'components/navbar/navbar.html\'"></div> --><!-- <header class="hero-unit" id="banner">\n  <div class="container">\n    <h1>\'Allo, \'Allo!</h1>\n    <p class="lead">Kick-start your next web app with Angular Fullstack</p>\n    <img id="hello" src="assets/images/edc5e504.yeoman.png"  alt="I\'m Yeoman">\n  </div>\n</header> --><challenge-modal show=clickedBegin height=420px width=640px><div ng-show="step === \'step1\'"><div class=row1-div>Step 1.<br>Donate any Amount</div><div class=row2-div><i class="fa-li fa fa-spinner fa-spin"></i><p>You will be redirected to Beyond Blue in</p><p>{{counter}}</p></div></div><div ng-show="step === \'step2\'"><div class=row1-div>Step 2.<br>Confirm Your Donation</div><div class=row2-div><p ng-show=notConfirmed>After this step you will be able to upload your image</p><button ng-show=notConfirmed class="btn btn-success" ng-click=confirmDonation()>Confirm Your Donation</button><div class=checkmark ng-show=!notConfirmed><svg version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink xml:space=preserve x=0px y=0px viewbox="0, 0, 100, 100" id=checkmark><g transform=""><circle class="path path-complete" fill=none stroke=#7DB0D5 stroke-width=4 stroke-miterlimit=10 cx=50 cy=50 r="44"><circle class="fill fill-complete success" fill=none stroke=#7DB0D5 stroke-width=4 stroke-miterlimit=10 cx=50 cy=50 r="44"><polyline class="check check-complete success" fill=none stroke=#7DB0D5 stroke-width=8 stroke-linecap=round stroke-miterlimit=10 points="70,35 45,65 30,52  "></g></svg></div></div></div><div class=button-row-div></div></challenge-modal><img src=assets/images/ae76428e.rainbow-bar-full.png class=img-responsive alt=""> <img src=assets/images/f040ad6d.logo2.png class="pull-left img-responsive" alt=""><div class="title-div pull-right">It\'s OK to be BLUE</div><img src=assets/images/ae76428e.rainbow-bar-full.png class=img-responsive alt=""><div class=bottom-border></div><div class=first-row-full ng-show=!completedDonation><img src=assets/images/573ce577.beyondblue.png class="img-responsive example-front" alt=""><p>Dontate &amp; go blue to raise awareness for Beyond Blue</p><a ng-click=clickedSupport() style=text-decoration:none><div class=main-video-button>SUPPORT NOW</div></a></div><div class=first-row-upload ng-show=completedDonation><p>Step 3.</p><p>Upload Your image, download &amp; share to facebook!</p><span class="btn btn-default btn-file" ng-show=!clickedUploaded>Click to Upload<input type=file id=imageLoader name=imageLoader ng-click="clickedUpload()"></span> <button ng-show=clickedUploaded class="btn btn-success button-front-2" ng-click=makeBlue()>Now Click Here to Make Blue!</button><canvas id=imageCanvas></canvas><!-- <input class="main-video-button" type="file" id="imageLoader" name="imageLoader"/> --></div><!-- <div class="container">\n  <div class="row">\n    <div class="col-lg-12">\n      <h1 class="page-header">Features:</h1>\n      <ul class="nav nav-tabs nav-stacked col-md-4 col-lg-4 col-sm-6" ng-repeat="thing in awesomeThings">\n        <li><a href="#" tooltip="{{thing.info}}">{{thing.name}}</a></li>\n      </ul>\n    </div>\n  </div>\n</div> --><div class="bottom-row row"><div class=col-xs-4><i class="fa fa-heart-o"></i><p>By donating you help us reduce the impact of anxiety and depression on the Australian community</p></div><div class=col-xs-4><i class="fa fa-cloud-upload"></i><p>You will then be able to upload your profile picture to add the beyond blue logo</p></div><div class=col-xs-4><i class="fa fa-facebook"></i><p>Upload your new profile picture to show your support and encourage others</p></div></div><footer class="footer footer-front"><div class=container><p>Copyright Â© 2015 | <a href=https://www.beyondblue.org.au/get-involved/make-a-donation/step-1-make-a-donation>Link to Beyond Blue</a></p></div></footer><img src=assets/images/ae76428e.rainbow-bar-full.png class=img-responsive alt="">'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand>jocular-octo-prune</a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li></ul></div></div></div>')}]);